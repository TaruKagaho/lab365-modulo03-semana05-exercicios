services:
    backend:
        build: silvaomega/exercicio
        ports:
            - 8080:8080
        environment:
            - POSTGRES_DB=example
        networks:
            - spring-postgres
    db:
        image: postgres
        restart: always
        secrets:
            - db-password
        volumes:
            - db-data:/var/lib/postgresql/data
        networks:
            - spring-postgres
        environment:
            - POSTGRES_DB=root
            - POSTGRES_PASSWORD=root
        expose:
            - 5432
volumes:
    db-data:
secrets:
    db-password:
        file: db/password.txt
networks:
    spring-postgres: